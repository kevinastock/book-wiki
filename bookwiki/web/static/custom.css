/* Kill Pico's tooltip underline */
.no-underline[data-tooltip] {
  text-decoration: none !important;
  border-bottom: none !important;
}

/* Table row hover styles for tables with row-links class */
table.row-links tr[onclick] {
  cursor: pointer;
}

table.row-links tr[onclick]:hover th,
table.row-links tr[onclick]:hover td {
  background-color: var(--pico-color-blue-50) !important;
  transition: background-color 0.2s ease;
}


/* Let the grid item shrink inside Pico’s grid columns */
details.dropdown {
  min-width: 0;
}

/* Summary: two columns = [text | caret] */
details.dropdown>summary {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  /* text shrinks, caret auto-size */
  align-items: center;
  gap: .5rem;
}

/* Truncate only the text, not the caret */
details.dropdown>summary .summary-label {
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Height cap for long menus; dvh handles mobile browser UI nicely */
details.dropdown[open]>ul {
  max-block-size: 70dvh;
  overflow-y: auto;
}

/* Low specificity, plays nicely with Pico */
@layer components {
  :where(article.flag) {
    position: relative;
    overflow: hidden;
    /* clip to rounded corners */
    --flag-width: .25rem;
    /* tweak globally or per-card */
    --flag-color: var(--pico-color-grey-950);
    /* default/fallback */
  }

  :where(article.flag)::before {
    content: "";
    position: absolute;
    inset-block: 0;
    /* top & bottom */
    inset-inline-start: 0;
    /* logical "left" */
    width: var(--flag-width);
    background: var(--flag-color);
  }

  article.flag[data-flag="assistant-text"] {
    --flag-color: var(--pico-color-azure-500);
  }

  article.flag[data-flag="user-text"] {
    --flag-color: var(--pico-color-grey-300);
  }

  article.flag[data-flag="unresponded-tool"] {
    --flag-color: var(--pico-color-lime-200);
  }

  article.flag[data-flag="responded-tool"] {
    --flag-color: var(--pico-color-jade-500);
  }

  article.flag[data-flag="errored-tool"] {
    --flag-color: var(--pico-color-red-500);
  }

  article.flag[data-flag="current-prompt"] {
    --flag-color: var(--pico-color-azure-500);
  }

  article.flag[data-flag="old-prompt"] {
    --flag-color: var(--pico-color-grey-300);
  }
}

nav li a[aria-current="page"] {
  text-decoration: underline;
}


/* Positioning scaffolding */
.codeblock.has-wrap {
  position: relative;
}

.codeblock.has-wrap pre {
  margin: 0;
  white-space: pre;
  /* default: preserve whitespace, NO wrap */
  overflow-x: auto;
  /* horizontal scroll for long tokens */
  word-break: normal;
  /* ensure no mid-token breaks */
  overflow-wrap: normal;
  /* ditto (do NOT set to 'anywhere') */
  hyphens: manual;
  /* don't auto-hyphenate */
}

.codeblock.has-wrap pre>code {
  white-space: inherit;
}

/* Overlay control, top-right */
.codeblock .wrap-switch {
  position: absolute;
  top: .5rem;
  right: .5rem;
  margin: 0;
  z-index: 1;
  pointer-events: none;
  /* let selection pass through except on the summary */
}

.codeblock .wrap-switch>summary {
  pointer-events: auto;
  /* only the small chevron captures clicks */
  padding: 0;
  width: 1.5rem;
  height: 1.5rem;
  display: grid;
  place-items: center;
  list-style: none;
}

.codeblock .wrap-switch>summary::-webkit-details-marker {
  display: none;
}

/* Visually hidden text for a11y */
.codeblock .wrap-switch>summary>.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Optional hover affordance; keeps Pico’s chevron */
.codeblock .wrap-switch>summary:hover {
  background: color-mix(in oklab, CanvasText 8%, transparent);
  border-radius: .375rem;
}

/* When open: wrap lines, still no mid-token breaks */
.codeblock .wrap-switch[open]~pre {
  white-space: pre-wrap;
  /* preserves spaces/newlines, allows wrapping at spaces */
  word-break: normal;
  /* keep tokens intact */
  overflow-wrap: normal;
  /* no emergency mid-token breaks */
  hyphens: manual;
}

nav h1 {
  margin: 0;
  padding-inline: var(--pico-nav-element-spacing-horizontal, 1.0rem);
}